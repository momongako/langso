!function(e){"use strict";e(document).ready((function(){o.init()}));var o={init:function(){this.holder=e("#qodef-membership-login-modal"),this.holder.length&&(o.triggerShowModal(this.holder),o.initTabs(this.holder),o.triggerResetPasswordLink(this.holder),o.triggerFormSubmit(this.holder),o.triggerFormSocialSubmit(this.holder))},triggerShowModal:function(n){n.children(".qodef-membership-login-modal-overlay").on("click",(function(){o.hideModal(n)})),e(window).on("keyup",(function(e){27===e.keyCode&&o.hideModal(n)})),e(document.body).on("kamperen_membership_trigger_login_modal",(function(){o.showModal(n)}))},showModal:function(e){e.hasClass("qodef--opened")||e.addClass("qodef--opened")},hideModal:function(e){e.hasClass("qodef--opened")&&e.removeClass("qodef--opened")},initTabs:function(e){e.children(".qodef-membership-login-modal-content").tabs()},triggerResetPasswordLink:function(e){e.find("#qodef-membership-login-modal-part .qodef-m-links-reset-password").on("click",(function(o){o.preventDefault(),(o=e.find(".qodef-membership-login-modal-navigation .qodef-m-navigation-item.qodef--reset-password")).length&&o.find(".qodef-e-link").trigger("click")}))},triggerFormSubmit:function(n){(n=n.find("form")).length&&n.each((function(){var n=e(this);n.on("submit",(function(e){e.preventDefault(),n.hasClass("qodef--loading")||o.triggerRequest(n)}))}))},triggerFormSocialSubmit:function(n){var i=n.find('form[id*="qodef-membership-login"]');i.length&&i.find(".qodef-m-social-login").find(".qodef-m-social-login-btn").on("click",(function(n){n.preventDefault(),e(document).trigger("kamperen_membership_social_login_is_triggered",[o,i,e(this).data("social")])}))},triggerRequest:function(n,i,t){n.addClass("qodef--loading");var r=n.find(".qodef-m-response"),s=n.find(".qodef-m-request-type").val();r.removeClass("qodef--success qodef--error qodef--undefined").empty();var a={options:{request_type:s,redirect:n.find(".qodef-m-redirect").val(),private_key:"false"},nonce:n.find("#kamperen-membership-ajax-"+s+"-nonce").val()},d="POST",l=qodefGlobal.vars.loginModalRestRoute;switch(s){case"login":d="GET",l=qodefGlobal.vars.loginModalGetRestRoute,a.options.user_login=n.find(".qodef-m-user-name").val(),a.options.user_password=n.find(".qodef-m-user-password").val(),a.options.remember=n.find(".qodef-m-links-remember:checked").length,null!=i&&(a.options.social_login=i,null!=t&&(a.options.social_response=t));break;case"register":a.options.user_login=n.find(".qodef-m-user-name").val(),a.options.user_email=n.find(".qodef-m-user-email").val(),a.options.user_password=n.find(".qodef-m-user-password").val(),a.options.user_confirm_password=n.find(".qodef-m-user-confirm-password").val();break;case"reset-password":a.options.user_login=n.find(".qodef-m-user-login").val()}return e.ajax({type:d,url:qodefGlobal.vars.restUrl+l,data:a,success:function(e){r.addClass("qodef--"+e.status).html(e.message),"success"===e.status&&("register"!==s||a.options.hasOwnProperty("social_login")?o.triggerRedirection(e.redirect):o.triggerForceLogin(n,a,e.redirect))},complete:function(){n.removeClass("qodef--loading")}}),!1},triggerRedirection:function(e){""!==e&&e!==window.location&&(window.location=e)},triggerForceLogin:function(n,i,t){i.options.request_type="login",i.nonce=n.parent().find("#kamperen-membership-ajax-login-nonce").val(),e.ajax({type:"GET",url:qodefGlobal.vars.restUrl+qodefGlobal.vars.loginModalGetRestRoute,data:i,dataType:"json",success:function(e){"success"===e.status&&o.triggerRedirection(t)}})}}}(jQuery),function(e){"use strict";e(document).ready((function(){o.init()}));var o={init:function(){this.holder=e(".qodef-login-opener-widget"),this.holder.length&&this.holder.each((function(){o.triggerClick(e(this))}))},triggerClick:function(o){o.find(".qodef-login-opener").on("click",(function(o){o.preventDefault(),e(document.body).trigger("kamperen_membership_trigger_login_modal")}))}}}(jQuery),function(e,o,n){var i=e.getElementsByTagName(o)[0];e.getElementById(n)||((o=e.createElement(o)).id=n,o.src="https://connect.facebook.net/en_US/sdk.js",i.parentNode.insertBefore(o,i))}(document,"script","facebook-jssdk"),function(e){"use strict";e(document).ready((function(){o.init()})),e(document).on("kamperen_membership_social_login_is_triggered",(function(e,n,i,t){o.fbIsAppIdSet()&&"facebook"===t&&o.fbLogin(n,i,t)}));var o={init:function(){o.fbIsAppIdSet()&&o.fbAsyncInit(kamperenMembershipGlobal.facebookAppId)},fbIsAppIdSet:function(){return void 0!==kamperenMembershipGlobal.facebookAppId&&""!==kamperenMembershipGlobal.facebookAppId},fbAsyncInit:function(e){""!==e&&(window.fbAsyncInit=function(){FB.init({appId:e,autoLogAppEvents:!0,cookie:!0,xfbml:!0,version:"v5.0"}),window.FB=FB})},fbLogin:function(e,n,i){window.FB.login((function(t){o.fbCheckStatus(t,e,n,i)}),{scope:"email, public_profile"})},fbCheckStatus:function(e,n,i,t){"connected"===e.status?o.fbGetUserData(n,i,t):"not_authorized"===e.status?console.log("Please log into this app"):console.log("Please log into Facebook")},fbGetUserData:function(e,o,n){FB.api("/me","GET",{fields:"id, name, email, link, picture"},(function(i){i.image=i.picture.data.url,o.hasClass("qodef--loading")||e.triggerRequest(o,n,i)}))}}}(jQuery),function(e){"use strict";e(document).ready((function(){o.init()})),e(document).on("kamperen_membership_social_login_is_triggered",(function(e,n,i,t){o.isAppIdSet()&&"google"===t&&o.login(n,i,t)}));var o={init:function(){o.isAppIdSet()&&o.asyncInit(kamperenMembershipGlobal.googleAppId)},isAppIdSet:function(){return void 0!==kamperenMembershipGlobal.googleAppId&&""!==kamperenMembershipGlobal.googleAppId},asyncInit:function(e){""!==e&&gapi.load("auth2",(function(){window.auth2=gapi.auth2.init({client_id:e})}))},login:function(e,n,i){window.auth2.signIn().then(o.signIn(e,n,i),(function(e){console.log(e)}))},signIn:function(e,n,i){window.auth2.isSignedIn.get()?o.getUserData(e,n,i):window.gapi.auth2.getAuthInstance().isSignedIn.listen((function(t){t&&o.getUserData(e,n,i)}))},getUserData:function(e,o,n){var i={id:(i=window.auth2.currentUser.get().getBasicProfile()).getId(),name:i.getName(),email:i.getEmail(),image:i.getImageUrl()};o.hasClass("qodef--loading")||e.triggerRequest(o,n,i)}}}(jQuery),function(){"use strict";jQuery(document).on("kamperen_membership_social_login_is_triggered",(function(o,n,i,t){"twitter"===t&&e.triggerRequest(n,i,t)}));var e={triggerRequest:function(e,o,n){o.hasClass("qodef--loading")||e.triggerRequest(o,n)}}}();